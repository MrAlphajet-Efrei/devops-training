# Story 1.1: Project Repository Setup

## Status

**Done**

---

## Story

**As a** DevOps engineer,
**I want** a well-structured monorepo with all necessary directories and configuration files,
**so that** I have a solid foundation to build the application and infrastructure components.

---

## Acceptance Criteria

1. GitHub repository is initialized with `.gitignore` for Python, Node.js, Terraform, and IDE files
2. Directory structure follows the agreed pattern (`apps/`, `infra/`, `.github/`, `docs/`)
3. Root `README.md` documents project purpose, structure, and getting started guide
4. `.editorconfig` ensures consistent formatting across editors
5. Pre-commit hooks are configured for basic linting (optional but recommended)

---

## Tasks / Subtasks

- [x] **Task 1: Initialize Repository Structure** (AC: 2)
  - [x] Create root directories: `apps/`, `infra/`, `.github/`, `docs/`, `scripts/`
  - [x] Create `apps/frontend/` directory (Next.js placeholder)
  - [x] Create `apps/api/` directory (FastAPI placeholder)
  - [x] Create `infra/terraform/` directory structure (`environments/`, `modules/`)
  - [x] Create `infra/helm/` directory structure (`charts/`, `environments/`)
  - [x] Create `infra/kind/` directory
  - [x] Create `infra/grafana/dashboards/` directory
  - [x] Create `.github/workflows/` directory

- [x] **Task 2: Create .gitignore** (AC: 1)
  - [x] Add Python ignores (`.venv/`, `__pycache__/`, `*.pyc`, `.pytest_cache/`)
  - [x] Add Node.js ignores (`node_modules/`, `.next/`, `dist/`)
  - [x] Add Terraform ignores (`.terraform/`, `*.tfstate*`, `*.tfvars`)
  - [x] Add IDE ignores (`.idea/`, `.vscode/`, `*.swp`)
  - [x] Add environment file ignores (`.env`, `.env.local`)
  - [x] Add OS-specific ignores (`.DS_Store`, `Thumbs.db`)

- [x] **Task 3: Create .editorconfig** (AC: 4)
  - [x] Set root = true
  - [x] Define default settings (indent_style, indent_size, charset, end_of_line)
  - [x] Add Python-specific overrides (4 spaces)
  - [x] Add YAML-specific overrides (2 spaces)
  - [x] Add Makefile-specific overrides (tabs)

- [x] **Task 4: Create Root README.md** (AC: 3)
  - [x] Add project title and description
  - [x] Add project goals section (link to PRD goals G1-G9)
  - [x] Add architecture overview section (3-tier: Next.js + FastAPI + PostgreSQL)
  - [x] Add tech stack summary table
  - [x] Add project structure tree
  - [x] Add "Getting Started" section with prerequisites
  - [x] Add "Quick Start" section with basic commands
  - [x] Add "Development" section (docker-compose usage)
  - [x] Add "Documentation" section linking to `docs/`

- [x] **Task 5: Create .env.example** (AC: 1, related)
  - [x] Add placeholder for database variables (`DATABASE_URL`, `POSTGRES_*`)
  - [x] Add placeholder for API configuration (`API_HOST`, `API_PORT`)
  - [x] Add placeholder for frontend configuration (`NEXT_PUBLIC_API_URL`)
  - [x] Add comments explaining each variable

- [x] **Task 6: Create Makefile** (AC: 3, related)
  - [x] Add `help` target (default, lists available commands)
  - [x] Add `setup-local` target (placeholder for local setup)
  - [x] Add `dev` target (placeholder for docker-compose up)
  - [x] Add `test` target (placeholder for running tests)
  - [x] Add `lint` target (placeholder for linting)
  - [x] Add `clean` target (placeholder for cleanup)

- [x] **Task 7: Configure Pre-commit Hooks** (AC: 5, optional)
  - [x] Create `.pre-commit-config.yaml`
  - [x] Add trailing whitespace hook
  - [x] Add end-of-file fixer hook
  - [x] Add YAML syntax checker hook
  - [x] Document installation in README (`pre-commit install`)

---

## Dev Notes

### Prerequisites

The following tools must be installed before starting this story:

- **Git** (2.x+) - Version control
- **Make** (optional on Windows - use Git Bash or WSL) - Task runner for Makefile
- **Node.js** (18.x+) - Required for pre-commit hooks and later frontend stories
- **Python** (3.11+) - Required for pre-commit hooks and later API stories
- **pre-commit** (optional) - Install via `pip install pre-commit`

> **Windows Note:** Test commands in this story use Unix syntax. Use Git Bash, WSL, or adapt to PowerShell equivalents.

### Relevant Source Tree

[Source: architecture/12-unified-project-structure.md]

```
devops-learning-project/
├── .github/
│   └── workflows/
│       ├── ci.yaml              # Build & test on PR
│       ├── cd.yaml              # Build, push, deploy on main
│       └── terraform.yaml       # Infrastructure changes
│
├── apps/
│   ├── frontend/                # Next.js application
│   │   ├── src/
│   │   ├── Dockerfile
│   │   ├── package.json
│   │   └── README.md
│   ├── api/                     # FastAPI application
│   │   ├── src/
│   │   ├── tests/
│   │   ├── Dockerfile
│   │   ├── pyproject.toml
│   │   └── README.md
│   └── docker-compose.yaml      # Local development
│
├── infra/
│   ├── terraform/
│   │   ├── environments/
│   │   │   ├── dev/
│   │   │   └── prod/
│   │   ├── modules/
│   │   │   ├── acr/
│   │   │   ├── keyvault/
│   │   │   ├── storage/
│   │   │   └── aks/
│   │   └── backend.tf
│   ├── helm/
│   │   ├── charts/
│   │   │   ├── api/
│   │   │   ├── frontend/
│   │   │   └── postgres/
│   │   ├── environments/
│   │   └── helmfile.yaml
│   ├── kind/
│   │   └── cluster-config.yaml
│   └── grafana/
│       └── dashboards/
│
├── scripts/
│   ├── setup-local.sh
│   ├── create-kind-cluster.sh
│   └── port-forward.sh
│
├── docs/
│   ├── prd.md
│   ├── architecture.md
│   └── setup-guide.md
│
├── .env.example
├── .gitignore
├── .editorconfig
├── Makefile
└── README.md
```

### Tech Stack Reference (for README content)

[Source: architecture/3-tech-stack.md]

| Category      | Technology            | Version               |
| ------------- | --------------------- | --------------------- |
| Frontend      | Next.js (TypeScript)  | 14.x                  |
| UI Styling    | Tailwind CSS          | 3.x                   |
| Backend       | Python FastAPI        | 0.109+                |
| Database      | PostgreSQL            | 15.x                  |
| Container     | Docker                | 24.x                  |
| Orchestration | Kubernetes (Kind/AKS) | 1.28+                 |
| IaC           | Terraform             | 1.5+                  |
| K8s Packaging | Helm + Helmfile       | 3.x / 0.158+          |
| CI/CD         | GitHub Actions        | -                     |
| Monitoring    | Prometheus + Grafana  | kube-prometheus-stack |
| Logging       | Loki + Promtail       | loki-stack            |

### Coding Standards to Follow

[Source: architecture/17-coding-standards.md#17.2-naming-conventions]

| Element               | Convention           |
| --------------------- | -------------------- |
| Environment Variables | SCREAMING_SNAKE_CASE |
| API Routes            | kebab-case           |
| Database Tables       | snake_case           |

### Key Constraints

[Source: architecture/17-coding-standards.md#17.1-critical-rules]

- **Secrets**: Never hardcode; always use environment variables
- **Logging**: Structured JSON format; include request_id
- **Error Handling**: Use consistent error format with global handlers

### Important Notes

- This is Story 1 - foundation for all subsequent work
- Structure must support both local (Kind) and cloud (AKS) deployments
- Monorepo pattern simplifies CI/CD pipeline configuration
- All configuration files should have comments explaining purpose

---

## Testing

### Testing Requirements for This Story

| Validation          | Method                                                              |
| ------------------- | ------------------------------------------------------------------- |
| Directory structure | Manual verification: all directories exist                          |
| .gitignore          | Test: create test files that should be ignored, verify `git status` |
| .editorconfig       | Open files in editor, verify formatting applied                     |
| README.md           | Manual review: all required sections present                        |
| Pre-commit hooks    | Run `pre-commit run --all-files`                                    |

### Test Commands

```bash
# Verify directory structure
ls -la apps/ infra/ .github/ docs/ scripts/

# Verify .gitignore works
echo "test" > .env && git status | grep ".env" && rm .env

# Run pre-commit hooks (if configured)
pre-commit run --all-files
```

---

## Change Log

| Date       | Version | Description         | Author |
| ---------- | ------- | ------------------- | ------ |
| 2025-01-26 | 1.0     | Initial story draft | SM Bob |
| 2026-01-27 | 1.1     | Implementation complete - all tasks done | Dev James |

---

## Dev Agent Record

### Agent Model Used

Claude Opus 4.5 (claude-opus-4-5-20251101)

### Debug Log References

No debug issues encountered.

### Completion Notes List

- All 7 tasks completed successfully
- Directory structure created with .gitkeep files for Git tracking of empty dirs
- .gitignore covers Python, Node.js, Terraform, IDE, env, and OS patterns
- .editorconfig includes defaults + Python (4-space), YAML (2-space), Makefile (tab), Markdown overrides
- README.md includes all 9 required sections per story spec
- .env.example has commented placeholders for DB, API, and frontend config
- Makefile has all 6 targets (help as default) with placeholder implementations
- .pre-commit-config.yaml configured with trailing-whitespace, end-of-file-fixer, check-yaml, and check-added-large-files hooks
- Pre-commit install documented in README Quick Start section

### File List

- `.gitignore` (new)
- `.editorconfig` (new)
- `.env.example` (new)
- `.pre-commit-config.yaml` (new)
- `Makefile` (new)
- `README.md` (new)
- `apps/frontend/.gitkeep` (new)
- `apps/api/.gitkeep` (new)
- `infra/terraform/environments/dev/.gitkeep` (new)
- `infra/terraform/environments/prod/.gitkeep` (new)
- `infra/terraform/modules/.gitkeep` (new)
- `infra/helm/charts/.gitkeep` (new)
- `infra/helm/environments/.gitkeep` (new)
- `infra/kind/.gitkeep` (new)
- `infra/grafana/dashboards/.gitkeep` (new)
- `.github/workflows/.gitkeep` (new)
- `scripts/.gitkeep` (new)

---

## QA Results

### Review Date: 2026-01-27

### Reviewed By: Quinn (Test Architect)

### Code Quality Assessment

Story 1.1 is a scaffolding/foundation story with no application code — purely directory structure, configuration files, and documentation. The implementation is clean and well-organized.

**Strengths:**
- `.gitignore` is comprehensive, covering Python, Node.js, Terraform, IDE, env, and OS patterns
- `.editorconfig` correctly defines per-language overrides (Python 4-space, YAML 2-space, Makefile tabs, Markdown trailing whitespace preserved)
- `README.md` covers all 9 required sections with clear tech stack table and project structure tree
- `.env.example` has descriptive comments for each variable group
- `Makefile` follows standard convention with `.DEFAULT_GOAL := help` and `.PHONY` declarations
- `.pre-commit-config.yaml` includes practical hooks with `--allow-multiple-documents` for YAML

**Minor observations (non-blocking):**
- `Makefile` `dev` target calls `docker compose up --build` directly but `docker-compose.yaml` doesn't exist yet — expected for a placeholder story
- Pre-commit hooks rev `v4.5.0` could be pinned to latest, but not a concern at this stage

### Refactoring Performed

No refactoring needed — scaffolding story with no application code.

### Compliance Check

- Coding Standards: ✓ Naming conventions followed (SCREAMING_SNAKE_CASE for env vars)
- Project Structure: ✓ Matches architecture source tree exactly
- Testing Strategy: N/A (no application code to test)
- All ACs Met: ✓ All 5 acceptance criteria satisfied

**AC Traceability:**
- AC1 (`.gitignore`): ✓ — Python, Node.js, Terraform, IDE patterns all present
- AC2 (Directory structure): ✓ — `apps/`, `infra/`, `.github/`, `docs/`, `scripts/` all created
- AC3 (Root README): ✓ — All required sections documented
- AC4 (`.editorconfig`): ✓ — Consistent formatting rules defined
- AC5 (Pre-commit hooks): ✓ — Configured with 4 hooks

### Improvements Checklist

- [x] All directory structures verified
- [x] All configuration files have explanatory comments
- [x] Pre-commit hooks cover essential formatting checks

### Security Review

No security concerns. `.env` is properly gitignored. `.env.example` contains only placeholder values, no real secrets.

### Performance Considerations

N/A — scaffolding story, no runtime code.

### Files Modified During Review

None.

### Gate Status

Gate: PASS → docs/qa/gates/1.1-project-repository-setup.yml

### Recommended Status

✓ Ready for Done
